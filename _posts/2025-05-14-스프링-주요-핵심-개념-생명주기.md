---
layout: post
title: 스프링 주요 핵심 개념 & 생명주기
date: '2025-05-14 17:04:19 +0900'
author: hyun
categories: [JAVA, Spring]
tags: [JAVA, Spring]
---

## 주요 핵심 개념

### IoC (Inversion of Control, 제어의 역전)

- 객체의 생성과 제어 흐름의 주도권을 **개발자 → 스프링 컨테이너로 위임**하는 설계 원칙.
- 개발자는 객체 생성 · 소멸을 직접하지 않고, **스프링이 대신 객체를 만들고 관리**해준다.

### DI (Dependency Injection, 의존성 주입)

- 스프링 컨테이너가 생성한 **빈에 필요한 의존성을 자동으로 주입**해주는 방식.
- 생성자, 필드, 세터 방식이 있으며 **실무에선 생성자 주입을 권장**함 (불변성, 테스트 용이성 때문)
- DI는 IoC의 실제 구현 방식 중 하나이며, 빈 생명주기 중 **의존성 설정 단계에서 실행**된다.

### 스프링 빈 (Spring Bean)

- **스프링 컨테이너가 생성하고 관리하는 자바 객체**를 빈이라고 부름.
- 빈은 기본적으로 **싱글톤 스코프**로 관리되며, **컨테이너 시작부터 종료까지 하나의 인스턴스를 공유**한다.
- 그 외에 프로토타입, request, session 등의 스코프도 있으며, **스코프에 따라 생명주기 범위가 달라진다.**

### 어노테이션 기반 설정

- 어노테이션을 사용하면 빈 등록과 의존성 주입을 선언적으로 처리할 수 있다.
- 클래스에 `@Component`, `@Service`, `@Repository`, `@Controller`를 붙이면 자동으로 빈이 등록 됨.
- 생성자나 필드에 `@Autowired`를 붙이면 의존성을 자동으로 주입함
- 컴포넌트 스캔을 통해 지정한 패키지 내에서 이러한 어노테이션을 탐색하고 자동 등록한다.

## 스프링 생명주기

### 스프링 빈 생명주기

- 스프링 컨테이너가 시작 시 **빈(Bean)을 생성 → 의존성 주입(DI) → 초기화 → 사용 → 소멸**까지 전 과정을 관리
- 이들은 서비스, DAO, 컨트롤러 등 전체 애플리케이션의 구성 요소가 된다.

### ApplicationContext(스프링 컨테이너) 생명주기

- 스프링의 핵심 컨테이너로, **모든 빈을 관리**하고 애플리케이션의 **전체 생명주기 (시작~종료)**를 담당한다.
- 즉, 빈 생명주기가 컨테이너 내부에서 개별적으로 일어나는 것이라면, ApplicationContext생명주기는 전체 빈들을 포함한 앱 전체의 라이프사이클이다.

### DispatcherServlet의 생명주기 & 역할

DispatcherServlet은 일반 서블릿과 마찬가지로 서블릿 컨테이너에 의해 관리된다.

1. **초기화(`init()`)** : 애플리케이션 시작 시 한 번 호출되며, 내부적으로 initStrategies() 메서드를 통해 다양한 전략 객체를 초기화한다.
2. **요청 처리(`service()`)** : 클라이언트로부터 HTTP 요청이 들어올 때마다 호출되며, doDispatch() 메서드를 통해 요청을 처리한다.
3. **종료(`destroy()`)** : 애플리케이션 종료 시 호출되며, 리소스를 정리한다.

### DispatcherServlet의 요청 처리 흐름

DispathcerServlet은 클라이언트의 요청을 받아 적절한 컨트롤러로 전달하고, 그 결과를 뷰로 렌더링하여 응답을 생성한다.

1. **요청 수신** : 클라이언트의 HTTP 요청을 수신함
2. **핸들러 매핑 조회** : `HandlerMapping`을 통해 요청 URL에 매핑된 컨트롤러(핸들러)를 찾는다.
3. **핸들러 어댑터 선택** : 선택된 핸들러를 실행할 수 있는 `HandlerAdapter`를 결정
4. **핸들러 실행** : `HandlerAdapter`를 통해 컨트롤러를 실행하고, `ModelAndView` 객체를 반환
5. **뷰 리졸버 처리** : `ViewResolver`를 사용하여 논리적인 뷰 이름을 실제 뷰 객체로 변환
6. **뷰 렌더링** : 뷰 객체를 통해 모델 데이터를 기반으로 최종 HTML을 생성
7. **응답 반환** : 렌더링된 결과를 클라이언트에게 응답으로 반환
